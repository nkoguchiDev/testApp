<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>ログイン</title>
    <link rel="stylesheet" href="style.css">
</head>

<header>
    <center>
        <h1>JavaScriptとHTMLで簡単なログインフォームを作る</h1>
    </center>
</header>
<style>
    header {
        position: fixed;
        color: white;
        width: 100%;
        height: 70px;
        background-color: #8dc21f;
    }
</style>

<br>
<br>
<br>

<body>
    <div>
        <!--フォーム-->
        <form name="login_form">
            <center>
                <h1 class="contact-title">ログイン</h1>
                <p>ID, Passwordご入力の上, 「認証」ボタンをクリックしてください.</p>
            </center>
            <div>

                <center>
                    <div>
                        <input type="id" name="id" id="username" placeholder="ID">
                    </div>
                    <br>
                    <div>
                        <input type="password" name="pass" id="password" placeholder="Password" onchange="nextPage()">
                    </div>
                    <div>
                        <button type="button" onClick="nextPage();">認証</button>
                    </div>
                </center>

            </div>
        </form>

        <!--ログイン処理-->
        <script language="JavaScript" type="text/javascript">
            function nextPage() {
                id = document.getElementById("username").value;
                pwd = document.getElementById("password").value;

                const data = {
                    email: id,
                    password: pwd
                }

                const XHR = new XMLHttpRequest();

                // エラーが発生した場合に行うことを定義します
                XHR.addEventListener('error', function (event) {
                    alert('Oops! Something went wrong.');
                });

                // リクエストをセットアップします
                XHR.open('POST', 'http://localhost:80/api/v1/session');

                XHR.setRequestHeader('Content-Type', 'application/json');
                // 最後に、データを送信します
                XHR.send(JSON.stringify(data));
            }
        </script>

    </div>
</body>

</html>